function output_top_aoas = run_spotfi(filepath)
%     filepath = './5g_data/90-2m-4.dat';
	antenna_distance = 0.026;
    % frequency = 5 * 10^9;
    % frequency = 5.785 * 10^9;
    frequency = 5.745 * 10^9; %149??????????
    sub_freq_delta = (40 * 10^6) / 30;
    %sub_freq_delta = 40 * 10^6;
    plot_switch = 1;%???????????????????????MUSIC??????????0??????????????1?????
	
	csi_trace=readfile(filepath);
    %??? X ????????????????????????????????????????????????????????????????????????
    %%%%????
    num_packets = floor(length(csi_trace)/30);
	sampled_csi_trace = csi_sampling(csi_trace, num_packets, 1, length(csi_trace));
 	[aoa_packet_data, tof_packet_data] = run_music(sampled_csi_trace, frequency, sub_freq_delta, antenna_distance, plot_switch);
%     [aoa_packet_data, tof_packet_data] = run_music_sum_R(sampled_csi_trace, frequency, sub_freq_delta, antenna_distance);
	[output_top_aoas] = normalized_likelihood(tof_packet_data, aoa_packet_data, num_packets);
end
